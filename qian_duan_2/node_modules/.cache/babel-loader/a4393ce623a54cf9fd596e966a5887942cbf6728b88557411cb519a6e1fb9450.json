{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, withKeys as _withKeys, vModelText as _vModelText, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"display\": \"flex\",\n    \"flex-direction\": \"column\",\n    \"width\": \"600px\",\n    \"background-color\": \"white\",\n    \"margin-left\": \"20px\"\n  }\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"display\": \"flex\",\n    \"height\": \"30px\",\n    \"background-color\": \"lightblue\",\n    \"align-items\": \"center\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"p\", {\n  style: {\n    \"margin-left\": \"300px\",\n    \"color\": \"white\",\n    \"width\": \"200px\",\n    \"font-size\": \"25px\"\n  }\n}, \"在线聊天室\")], -1);\nconst _hoisted_3 = {\n  style: {\n    \"height\": \"550px\",\n    \"border-bottom\": \"solid 1px black\",\n    \"overflow\": \"auto\"\n  }\n};\nconst _hoisted_4 = {\n  key: 0,\n  style: {\n    \"display\": \"flex\"\n  }\n};\nconst _hoisted_5 = {\n  style: {\n    \"align-self\": \"center\"\n  }\n};\nconst _hoisted_6 = {\n  style: {\n    \"margin-left\": \"20px\",\n    \"background-color\": \"lightgrey\",\n    \"border-radius\": \"5px\",\n    \"padding\": \"8px\",\n    \"max-width\": \"200px\"\n  }\n};\nconst _hoisted_7 = {\n  key: 1,\n  style: {\n    \"display\": \"flex\",\n    \"flex-direction\": \"row-reverse\"\n  }\n};\nconst _hoisted_8 = {\n  style: {\n    \"align-self\": \"center\"\n  }\n};\nconst _hoisted_9 = {\n  style: {\n    \"margin-right\": \"20px\",\n    \"background-color\": \"deepskyblue\",\n    \"border-radius\": \"5px\",\n    \"padding\": \"8px\",\n    \"max-width\": \"200px\"\n  }\n};\nconst _hoisted_10 = {\n  style: {\n    \"display\": \"flex\",\n    \"flex-direction\": \"column\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.chats, item => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: $data.chats.indexOf(item),\n      style: {\n        \"display\": \"flex\",\n        \"flex-direction\": \"column\",\n        \"margin-top\": \"10px\"\n      }\n    }, [item.id != $data.id ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"p\", _hoisted_5, _toDisplayString(item.name), 1), _createElementVNode(\"p\", _hoisted_6, _toDisplayString(item.message), 1)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createElementVNode(\"p\", _hoisted_8, _toDisplayString(item.name), 1), _createElementVNode(\"p\", _hoisted_9, _toDisplayString(item.message), 1)]))]);\n  }), 128))]), _createElementVNode(\"div\", _hoisted_10, [_withDirectives(_createElementVNode(\"textarea\", {\n    onKeydown: _cache[0] || (_cache[0] = _withKeys((...args) => $options.SendMessage && $options.SendMessage(...args), [\"enter\"])),\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.chatInput = $event),\n    style: {\n      \"height\": \"60px\",\n      \"resize\": \"none\"\n    }\n  }, null, 544), [[_vModelText, $data.chatInput]]), _createElementVNode(\"button\", {\n    style: {\n      \"cursor\": \"pointer\",\n      \"margin-left\": \"600px\",\n      \"width\": \"100px\",\n      \"height\": \"30px\",\n      \"background-color\": \"lightblue\"\n    },\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.SendMessage && $options.SendMessage(...args))\n  }, \"发送\")])]);\n}","map":{"version":3,"names":["style","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_Fragment","_renderList","$data","chats","item","key","indexOf","id","_hoisted_4","_hoisted_5","_toDisplayString","name","_hoisted_6","message","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","onKeydown","_cache","_withKeys","args","$options","SendMessage","chatInput","$event","onClick"],"sources":["D:\\lin_hai_bo_ke\\qian_duan_2\\src\\Views\\ChatRoom.vue"],"sourcesContent":["<template>\r\n  <div style=\"display:flex;flex-direction:column;width:600px;background-color:white;margin-left:20px;\">\r\n        <div style=\"display:flex;height:30px;background-color:lightblue;align-items:center;\">\r\n          <p style=\"margin-left:300px;color:white;width:200px;font-size:25px;\">在线聊天室</p>\r\n        </div>\r\n        <div style=\"height:550px;border-bottom:solid 1px black;overflow:auto;\">\r\n          <div v-for=\"item in chats\" :key=\"chats.indexOf(item)\" style=\"display:flex;flex-direction:column;margin-top:10px;\">\r\n            <div v-if=\"item.id!=id\" style=\"display:flex;\"><p style=\"align-self:center;\">{{item.name}}</p><p style=\"margin-left:20px;background-color:lightgrey;border-radius:5px;padding:8px;max-width:200px;\">{{item.message}}</p></div>\r\n            <div v-else style=\"display:flex;flex-direction:row-reverse\"><p style=\"align-self:center;\">{{item.name}}</p><p style=\"margin-right:20px;background-color:deepskyblue;border-radius:5px;padding:8px;max-width:200px;\">{{item.message}}</p></div>\r\n          </div>\r\n        </div>\r\n        <div style=\"display:flex;flex-direction:column;\">\r\n          <textarea @keydown.enter=\"SendMessage\" v-model=\"chatInput\" style=\"height:60px;resize:none;\"></textarea>\r\n          <button style=\"cursor:pointer;margin-left:600px;width:100px;height:30px;background-color:lightblue\"  @click=\"SendMessage\">发送</button>\r\n        </div>\r\n      </div>\r\n</template>\r\n<script>\r\nimport {getCurrentInstance, onMounted} from \"vue\";\r\n\r\nexport default {\r\nsetup(){\r\n  const gci=getCurrentInstance();\r\n  onMounted(()=>{\r\n    gci.data.Socket=function(){\r\n      gci.data.ws = new WebSocket('ws://localhost:8001/Chat/'+gci.data.id);\r\n      gci.data.ws.onopen =function(){};\r\n      gci.data.ws.onmessage=function(data){gci.data.chats.push(JSON.parse(data.data))}\r\n      gci.data.ws.onerror = function(){console.log(\"连接已出错...\");setTimeout(()=>{gci.data.socket()},1500)}\r\n      //gci.data.ws.onclose = function(){setTimeout(()=>{gci.data.Socket()},2000)}\r\n    }\r\n    gci.data.Socket()\r\n  })\r\n},\r\ndata(){\r\n  return{\r\n    id:1,\r\n    chats:[],\r\n    dollarws:\"\",\r\n    chatInput:\"\",\r\n    //ws:\"\",\r\n  }\r\n},\r\nmethods:{\r\n  SendMessage(){\r\n  this.ws.send(this.chatInput)\r\n  this.chatInput=\"\"\r\n},\r\n}\r\n\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n</style>"],"mappings":";;EACOA,KAA+F,EAA/F;IAAA;IAAA;IAAA;IAAA;IAAA;EAAA;AAA+F;gCAC9FC,mBAAA,CAEM;EAFDD,KAA+E,EAA/E;IAAA;IAAA;IAAA;IAAA;EAAA;AAA+E,I,aAClFC,mBAAA,CAA8E;EAA3ED,KAAiE,EAAjE;IAAA;IAAA;IAAA;IAAA;EAAA;AAAiE,GAAC,OAAK,E;;EAEvEA,KAAiE,EAAjE;IAAA;IAAA;IAAA;EAAA;AAAiE;;;EAE1CA,KAAqB,EAArB;IAAA;EAAA;;;EAAyBA,KAA0B,EAA1B;IAAA;EAAA;AAA0B;;EAAqBA,KAAkG,EAAlG;IAAA;IAAA;IAAA;IAAA;IAAA;EAAA;AAAkG;;;EACtLA,KAA+C,EAA/C;IAAA;IAAA;EAAA;;;EAAmDA,KAA0B,EAA1B;IAAA;EAAA;AAA0B;;EAAqBA,KAAqG,EAArG;IAAA;IAAA;IAAA;IAAA;IAAA;EAAA;AAAqG;;EAGlNA,KAA2C,EAA3C;IAAA;IAAA;EAAA;AAA2C;;uBAVtDE,mBAAA,CAcU,OAdVC,UAcU,GAbJC,UAEM,EACNH,mBAAA,CAKM,OALNI,UAKM,I,kBAJJH,mBAAA,CAGMI,SAAA,QAAAC,WAAA,CAHcC,KAAA,CAAAC,KAAK,EAAbC,IAAI;yBAAhBR,mBAAA,CAGM;MAHsBS,GAAG,EAAEH,KAAA,CAAAC,KAAK,CAACG,OAAO,CAACF,IAAI;MAAGV,KAA2D,EAA3D;QAAA;QAAA;QAAA;MAAA;QACzCU,IAAI,CAACG,EAAE,IAAEL,KAAA,CAAAK,EAAE,I,cAAtBX,mBAAA,CAA6N,OAA7NY,UAA6N,GAA/Kb,mBAAA,CAA+C,KAA/Cc,UAA+C,EAAAC,gBAAA,CAAfN,IAAI,CAACO,IAAI,OAAMhB,mBAAA,CAA0H,KAA1HiB,UAA0H,EAAAF,gBAAA,CAAlBN,IAAI,CAACS,OAAO,M,oBACjNjB,mBAAA,CAA8O,OAA9OkB,UAA8O,GAAlLnB,mBAAA,CAA+C,KAA/CoB,UAA+C,EAAAL,gBAAA,CAAfN,IAAI,CAACO,IAAI,OAAMhB,mBAAA,CAA6H,KAA7HqB,UAA6H,EAAAN,gBAAA,CAAlBN,IAAI,CAACS,OAAO,M;eAGtOlB,mBAAA,CAGM,OAHNsB,WAGM,G,gBAFJtB,mBAAA,CAAuG;IAA5FuB,SAAO,EAAAC,MAAA,QAAAA,MAAA,MAAAC,SAAA,KAAAC,IAAA,KAAQC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;+DAAWnB,KAAA,CAAAsB,SAAS,GAAAC,MAAA;IAAE/B,KAAgC,EAAhC;MAAA;MAAA;IAAA;gCAAXQ,KAAA,CAAAsB,SAAS,E,GACzD7B,mBAAA,CAAqI;IAA7HD,KAA2F,EAA3F;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA,CAA2F;IAAGgC,OAAK,EAAAP,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;KAAE,IAAE,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}