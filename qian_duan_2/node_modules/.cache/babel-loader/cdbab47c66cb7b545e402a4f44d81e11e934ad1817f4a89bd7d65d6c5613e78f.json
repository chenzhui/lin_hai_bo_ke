{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport { getCurrentInstance, nextTick, onMounted, ref } from \"vue\";\nimport router from \"../Router/First\";\nexport default {\n  setup() {\n    const gci = getCurrentInstance();\n    onMounted(async () => {\n      document.title = \"我的收藏\";\n      gci.data.page = router.currentRoute.value.query.page;\n      gci.data.type = router.currentRoute.value.query.type;\n      if (gci.data.page == undefined) {\n        gci.data.page = 1;\n      }\n      gci.data.id = gci.appContext.config.globalProperties.$id;\n      gci.data.mitt1 = gci.appContext.config.globalProperties.$mitt1;\n      axios.get('http://114.55.38.94:8001/SelectCollectionsById', {\n        params: {\n          \"id\": gci.data.id\n        }\n      }).then(res => {\n        gci.data.blogs = res.data.data;\n        gci.data.eightBlogCount = Math.ceil(gci.data.blogs.length / 7);\n      });\n    });\n  },\n  data() {\n    return {\n      id: \"\",\n      index: 0,\n      type: \"\",\n      blogs: [],\n      eightBlogCount: 0,\n      page: 1,\n      collections: []\n    };\n  },\n  methods: {\n    GetTypeBlogs(type) {\n      router.push({\n        path: '/Collection',\n        query: {\n          'type': type,\n          'page': 1\n        }\n      });\n      router.currentRoute.value.query.type = type;\n      router.currentRoute.value.query.page = 1;\n      nextTick(() => {\n        this.mitt1.emit('Reload');\n      });\n    },\n    PreviousPage() {\n      if (this.page == 1) {\n        alert(\"已经是第一页了\");\n      } else {\n        this.page--;\n        router.push({\n          path: '/Self',\n          query: {\n            'page': this.page\n          }\n        });\n        router.currentRoute.value.query.page = this.page;\n        nextTick(() => {\n          this.mitt1.emit('Reload');\n        });\n      }\n    },\n    LastPage() {\n      if (this.page == this.eightBlogCount) {\n        alert(\"已经是最后一页了\");\n      } else {\n        this.page = this.eightBlogCount;\n        router.push({\n          path: '/Self',\n          query: {\n            'page': this.page\n          }\n        });\n        router.currentRoute.value.query.page = this.page;\n        nextTick(() => {\n          this.mitt1.emit('Reload');\n        });\n      }\n    },\n    NextPage() {\n      if (this.page == this.eightBlogCount) {\n        alert(\"已经是最后一页了\");\n      } else {\n        this.page++;\n        router.push({\n          path: '/Self',\n          query: {\n            'page': this.page\n          }\n        });\n        router.currentRoute.value.query.page = this.page;\n        nextTick(() => {\n          this.mitt1.emit('Reload');\n        });\n      }\n    },\n    SwitchPage(page) {\n      router.push({\n        path: '/Self',\n        query: {\n          \"type\": this.type,\n          'page': page\n        }\n      });\n      router.currentRoute.value.query.page = page;\n      nextTick(() => {\n        this.mitt1.emit('Reload');\n      });\n    },\n    ToBlog(blogId) {\n      const destinction = router.resolve({\n        path: '/Blog',\n        query: {\n          blogId: blogId\n        }\n      });\n      window.open(destinction.href, \"_blank\");\n    }\n  }\n};","map":{"version":3,"names":["axios","getCurrentInstance","nextTick","onMounted","ref","router","setup","gci","document","title","data","page","currentRoute","value","query","type","undefined","id","appContext","config","globalProperties","$id","mitt1","$mitt1","get","params","then","res","blogs","eightBlogCount","Math","ceil","length","index","collections","methods","GetTypeBlogs","push","path","emit","PreviousPage","alert","LastPage","NextPage","SwitchPage","ToBlog","blogId","destinction","resolve","window","open","href"],"sources":["D:\\lin_hai_bo_ke\\qian_duan_2\\src\\Views\\Collection.vue"],"sourcesContent":["<template>\r\n  <div style=\"background-color:white;display:flex;flex-direction:column;width:60rem;margin-left:20rem;\">\r\n      <div v-for=\"item in blogs.slice(page*7-7,page*7)\" :key=\"item.blogId\" @click=\"ToBlog(item.blogId)\" style=\"display:flex;flex-direction:column;width:60rem;cursor:pointer;font-size:1.4rem;margin-top:1rem;margin-left:1rem;\">\r\n        <div style=\"display:flex;align-items:start;\">\r\n          <p style=\"width:20%;font-size:1.8rem;\">博客ID:{{item.blogId}}</p>\r\n          <p style=\"width:60%;height:40px;font-size:1.2rem;\">标题:{{item.title}}</p>\r\n          <p style=\"max-width:20%;border-radius:5px;background-color:lightgreen;font-size:1.8rem;\">{{item.type}}</p>\r\n        </div>\r\n        <div style=\"display:flex;\">\r\n          <p style=\"margin-top:10px;width:40%\">作者:{{item.authorName}}</p>\r\n          <p style=\"margin-top:10px;\">{{item.name}}发布于{{item.birthTime}}</p>\r\n        </div>\r\n        <hr style=\"height:1px;width:99%;background-color:lightgrey;margin-top:5px;\">\r\n      </div>\r\n    <div style=\"display:flex;height:40px;margin-top:20px;\">\r\n      <button @click=\"PreviousPage\" style=\"cursor:pointer;width:2rem;height:2rem;\">上一页</button>\r\n      <div v-if=\"eightBlogCount<9\" style=\"width:78%;display:flex;flex-direction:row;\" >\r\n        <button v-for=\"item in eightBlogCount\" :key=\"item.blogId\" @click=\"SwitchPage(item)\" style=\"cursor:pointer;width:3rem;height:3rem;line-height:3rem;margin-left:1rem;\" :class=\"{'focus':item==page}\">{{item}}</button>\r\n      </div>\r\n      <div v-else style=\"display:flex;\">\r\n        <div v-if=\"page>5\" style=\"display:flex\">\r\n          <button @click=\"SwitchPage(1)\" class=\"fen_ye\">1</button>\r\n          <button @click=\"SwitchPage(3)\" class=\"fen_ye\">···</button>\r\n          <div v-if=\"page==eightBlogCount\">\r\n            <button @click=\"SwitchPage(page-4)\" class=\"fen_ye\">{{page-4}}</button>\r\n            <button @click=\"SwitchPage(page-3)\" class=\"fen_ye\">{{page-3}}</button>\r\n            <button @click=\"SwitchPage(page-2)\" class=\"fen_ye\">{{page-2}}</button>\r\n            <button @click=\"SwitchPage(page-1)\" class=\"fen_ye\">{{page-1}}</button>\r\n            <button @click=\"SwitchPage(page)\" class=\"fen_ye\" style=\"background-color:wheat\">{{page}}</button>\r\n          </div>\r\n          <div v-else-if=\"page==eightBlogCount-1\">\r\n            <button @click=\"SwitchPage(page-3)\" class=\"fen_ye\" >{{page-3}}</button>\r\n            <button @click=\"SwitchPage(page-2)\" class=\"fen_ye\" >{{page-2}}</button>\r\n            <button @click=\"SwitchPage(page-1)\" class=\"fen_ye\">{{page-1}}</button>\r\n            <button @click=\"SwitchPage(page)\" class=\"fen_ye\" style=\"background-color:wheat;\">{{page}}</button>\r\n            <button @click=\"SwitchPage(page+1)\" class=\"fen_ye\">{{page+1}}</button>\r\n          </div>\r\n          <div v-else>\r\n            <button @click=\"SwitchPage(page-2)\" class=\"fen_ye\">{{page-2}}</button>\r\n            <button @click=\"SwitchPage(page-1)\" class=\"fen_ye\">{{page-1}}</button>\r\n            <button @click=\"SwitchPage(page)\" class=\"fen_ye\">{{page}}</button>\r\n            <button @click=\"SwitchPage(page+1)\" class=\"fen_ye\">{{page+1}}</button>\r\n            <button @click=\"SwitchPage(page+2)\" class=\"fen_ye\">{{page+2}}</button>\r\n          </div>\r\n        </div>\r\n        <div v-else>\r\n          <button @click=\"SwitchPage(2)\" class=\"fen_ye\" :class=\"{'focus':2==page}\">2</button>\r\n          <button @click=\"SwitchPage(2)\" class=\"fen_ye\" :class=\"{'focus':2==page}\">2</button>\r\n          <button @click=\"SwitchPage(3)\" class=\"fen_ye\" :class=\"{'focus':3==page}\">3</button>\r\n          <button @click=\"SwitchPage(4)\" class=\"fen_ye\" :class=\"{'focus':4==page}\">4</button>\r\n          <button @click=\"SwitchPage(5)\" class=\"fen_ye\" :class=\"{'focus':5==page}\">5</button>\r\n          <button @click=\"SwitchPage(6)\" class=\"fen_ye\" :class=\"{'focus':6==page}\">6</button>\r\n          <button @click=\"SwitchPage(7)\" class=\"fen_ye\" :class=\"{'focus':7==page}\">7</button>\r\n        </div>\r\n      </div>\r\n      <button @click=\"NextPage\" style=\"cursor:pointer;width:60px;margin-left:20px;\">下一页</button>\r\n      <button @click=\"LastPage\" style=\"cursor:pointer;width:60px;margin-left:20px;\">最后一页</button>\r\n      <p style=\"margin-left:1rem;align-self:center\">共{{eightBlogCount}}页</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport {getCurrentInstance, nextTick, onMounted, ref} from \"vue\";\r\nimport router from \"../Router/First\";\r\nexport default {\r\n  setup(){\r\n    const gci = getCurrentInstance()\r\n    onMounted(async () => {\r\n      document.title = \"我的收藏\"\r\n      gci.data.page=router.currentRoute.value.query.page\r\n      gci.data.type=router.currentRoute.value.query.type\r\n      if(gci.data.page==undefined){gci.data.page=1}\r\n      gci.data.id=gci.appContext.config.globalProperties.$id\r\n      gci.data.mitt1 = gci.appContext.config.globalProperties.$mitt1\r\n      axios.get('http://114.55.38.94:8001/SelectCollectionsById',{params:{\"id\":gci.data.id}}).then((res)=>{\r\n        gci.data.blogs = res.data.data\r\n        gci.data.eightBlogCount=Math.ceil(gci.data.blogs.length/7)\r\n      })\r\n    })\r\n  },\r\n  data() {\r\n    return {\r\n      id: \"\",\r\n      index:0,\r\n      type: \"\",\r\n      blogs: [],\r\n      eightBlogCount: 0,\r\n      page: 1,\r\n      collections:[],\r\n    }\r\n  },\r\n  methods: {\r\n    GetTypeBlogs(type){\r\n      router.push({path:'/Collection',query:{'type':type,'page':1}})\r\n      router.currentRoute.value.query.type=type\r\n      router.currentRoute.value.query.page=1\r\n      nextTick((()=>{this.mitt1.emit('Reload')}))\r\n    },\r\n    PreviousPage() {\r\n      if(this.page==1){\r\n        alert(\"已经是第一页了\")\r\n      }else{\r\n        this.page--\r\n        router.push({path:'/Self',query:{'page':this.page}})\r\n        router.currentRoute.value.query.page=this.page\r\n        nextTick((()=>{\r\n          this.mitt1.emit('Reload')\r\n        }))\r\n      }\r\n    },\r\n    LastPage(){\r\n      if(this.page==this.eightBlogCount){alert(\"已经是最后一页了\")}else{\r\n        this.page=this.eightBlogCount\r\n        router.push({path:'/Self',query:{'page':this.page}})\r\n        router.currentRoute.value.query.page=this.page\r\n        nextTick((()=>{this.mitt1.emit('Reload')}))\r\n      }\r\n    },\r\n    NextPage(){\r\n      if (this.page==this.eightBlogCount){\r\n        alert(\"已经是最后一页了\")\r\n      }else{\r\n        this.page++\r\n        router.push({path:'/Self',query:{'page':this.page}})\r\n        router.currentRoute.value.query.page=this.page\r\n        nextTick((()=>{\r\n          this.mitt1.emit('Reload')\r\n        }))\r\n      }\r\n    },\r\n    SwitchPage(page) {\r\n      router.push({path:'/Self',query:{\"type\":this.type,'page':page}})\r\n      router.currentRoute.value.query.page=page\r\n      nextTick((()=>{\r\n        this.mitt1.emit('Reload')\r\n      }))\r\n    },\r\n    ToBlog(blogId) {\r\n      const destinction = router.resolve({path: '/Blog', query: {blogId: blogId}})\r\n      window.open(destinction.href, \"_blank\")\r\n    },\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.focus{background-color:wheat;}\r\n.focus1{font-size:1rem;border:solid 1px lightblue;min-height:40px;border:solid 2px lightblue;cursor:pointer;background-color:lightgreen;}\r\n.nofocus{font-size:1rem;border:solid 1px lightblue;background-color:lightgrey;min-height:40px;border:solid 2px lightblue;cursor:pointer;}\r\n.fen_ye{font-size:1rem;width:5rem;height:5rem;margin-left:1rem;}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}