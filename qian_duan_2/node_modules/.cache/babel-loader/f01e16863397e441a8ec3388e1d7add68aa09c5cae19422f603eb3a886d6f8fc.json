{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getCurrentInstance, onMounted, nextTick } from \"vue\";\nimport axios from \"axios\";\nimport router from \"../Router/First\";\nexport default {\n  setup() {\n    const gci = getCurrentInstance();\n    onMounted(() => {\n      document.title = '搜索结果';\n      gci.data.search = router.currentRoute.value.query.search;\n      axios.get('http://114.55.38.94/api/SearchBlogs', {\n        params: {\n          \"search\": router.currentRoute.value.query.search\n        }\n      }).then(res => {\n        console.log(res.data.data);\n        if (res.data.data[0] == null) {\n          gci.data.hasResult = false;\n        } else {\n          gci.data.blogs = res.data.data;\n          gci.data.eightBlogCount = Math.ceil(gci.data.blogs.length / 8);\n        }\n      });\n    });\n  },\n  data() {\n    return {\n      blogs: [],\n      eightBlogCount: 0,\n      search: null,\n      page: 1,\n      hasResult: true\n    };\n  },\n  methods: {\n    ToBlog(blogId) {\n      router.push({\n        path: '/Blog',\n        query: {\n          'blogId': blogId\n        }\n      });\n    },\n    PreviousPage() {\n      if (this.page == 1) {\n        alert(\"已经是第一页了\");\n      } else {\n        this.page--;\n        router.push({\n          path: '/Index',\n          query: {\n            'page': this.page\n          }\n        });\n        router.currentRoute.value.query.page = this.page;\n      }\n    },\n    NextPage() {\n      if (this.page == this.eightBlogCount) {\n        alert(\"已经是最后一页了\");\n      } else {\n        this.page++;\n        router.push({\n          path: '/Index',\n          query: {\n            'page': this.page\n          }\n        });\n        router.currentRoute.value.query.page = this.page;\n      }\n    },\n    SwitchPage(page) {\n      router.push({\n        path: '/Index',\n        query: {\n          'page': page\n        }\n      });\n      router.currentRoute.value.query.page = page;\n      nextTick(() => {\n        this.mitt1.emit('Reload');\n      });\n    },\n    SearchBlogs(search) {\n      router.push({\n        path: '/Search',\n        query: {\n          'search': search\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["getCurrentInstance","onMounted","nextTick","axios","router","setup","gci","document","title","data","search","currentRoute","value","query","get","params","then","res","console","log","hasResult","blogs","eightBlogCount","Math","ceil","length","page","methods","ToBlog","blogId","push","path","PreviousPage","alert","NextPage","SwitchPage","mitt1","emit","SearchBlogs"],"sources":["D:\\lin_hai_bo_ke\\qian_duan_2\\src\\Views\\Search.vue"],"sourcesContent":["<template>\r\n  <div style=\"display:flex;flex-direction:column;\">\r\n    <div style=\"display:flex;margin-top:30px;margin-left:100px;\">\r\n      <input @keydown.enter=\"SearchBlogs(search)\" v-model=\"search\" type=\"text\" style=\"background-color:lightblue;height:40px;width:600px;margin-left:5px;\" placeholder=\"请输入你想要查询的博客标题\">\r\n      <button @click=\"SearchBlogs(search)\" style=\"margin-left:10px;border-radius:10px;cursor:pointer;width:60px;color:white;background-color:lightblue;font-size:20px;\">搜索</button>\r\n    </div>\r\n    <div>\r\n      <div v-if=\"hasResult==true\" style=\"display:flex;flex-direction:column;width:500px;margin-left:200px;margin-top:50px;\">\r\n        <div style=\"background-color:white;height:656px;display:flex;flex-direction:column;\">\r\n          <div v-for=\"item in blogs.slice(page*8-8,page*8)\" :key=\"item.blogId\" @click=\"ToBlog(item.blogId)\" style=\"display:flex;flex-direction:column;cursor:pointer;font-size:18px;margin-top:10px;margin-left:10px;\">\r\n            <div style=\"display:flex;align-items:start;\">\r\n              <p style=\"width:100px\">博客ID:{{item.blogId}}</p>\r\n              <p style=\"width:300px;height:40px;\">标题:{{item.title}}</p>\r\n              <p style=\"margin-left:30px;border-radius:5px;background-color:lightgreen;height:25px;\">{{item.type}}</p>\r\n            </div>\r\n            <div style=\"display:flex;\">\r\n              <p style=\"margin-top:10px;width:160px;\">作者:{{item.authorName}}</p>\r\n              <p style=\"margin-top:10px;\">{{item.name}}发布于{{item.birthTime}}</p>\r\n            </div>\r\n            <hr style=\"height:1px;width:480px;background-color:lightgrey;margin-top:10px;\">\r\n          </div>\r\n        </div>\r\n        <div style=\"display:flex;height:30px;background-color:white;\">\r\n          <button @click=\"PreviousPage\" style=\"cursor:pointer;width:60px;\">上一页</button>\r\n          <div v-if=\"eightBlogCount<8\" style=\"display:flex;width:370px;margin-left:7px;\">\r\n            <div v-for=\"item in eightBlogCount\" :key=\"item\" style=\"margin-left:20px;\">\r\n              <button @click=\"SwitchPage(item)\" style=\"cursor:pointer;width:30px;height:30px;\" :class=\"{'focus':item==page}\">{{item}}</button>\r\n            </div>\r\n          </div>\r\n          <div v-else style=\"display:flex;width:370px;margin-left:7px;\">\r\n            <button @click=\"SwitchPage(1)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\" :class=\"{'focus':1==page}\">1</button>\r\n            <div v-if=\"page>5\" style=\"display:flex\">\r\n              <button @click=\"SwitchPage(3)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\" :class=\"{'focus':1==page}\">···</button>\r\n              <div v-if=\"page==eightBlogCount\">\r\n                <button @click=\"SwitchPage(page-4)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\">{{page-4}}</button>\r\n                <button @click=\"SwitchPage(page-3)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\">{{page-3}}</button>\r\n                <button @click=\"SwitchPage(page-2)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\">{{page-2}}</button>\r\n                <button @click=\"SwitchPage(page-1)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\">{{page-1}}</button>\r\n                <button @click=\"SwitchPage(page)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;background-color:wheat;\">{{page}}</button>\r\n              </div>\r\n              <div v-else-if=\"page==eightBlogCount-1\">\r\n                <button @click=\"SwitchPage(page-3)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\" :class=\"{'focus':2==page}\">{{page-3}}</button>\r\n                <button @click=\"SwitchPage(page-2)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\" >{{page-2}}</button>\r\n                <button @click=\"SwitchPage(page-1)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\">{{page-1}}</button>\r\n                <button @click=\"SwitchPage(page)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;background-color:wheat;\">{{page}}</button>\r\n                <button @click=\"SwitchPage(page+1)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\">{{page+1}}</button>\r\n              </div>\r\n              <div v-else>\r\n                <button @click=\"SwitchPage(page-2)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\">{{page-2}}</button>\r\n                <button @click=\"SwitchPage(page-1)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\">{{page-1}}</button>\r\n                <button @click=\"SwitchPage(page)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;background-color:wheat;\">{{page}}</button>\r\n                <button @click=\"SwitchPage(page+1)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\">{{page+1}}</button>\r\n                <button @click=\"SwitchPage(page+2)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\">{{page+2}}</button>\r\n              </div>\r\n            </div>\r\n            <div v-else>\r\n              <button @click=\"SwitchPage(2)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\" :class=\"{'focus':2==page}\">2</button>\r\n              <button @click=\"SwitchPage(3)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\" :class=\"{'focus':3==page}\">3</button>\r\n              <button @click=\"SwitchPage(4)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\" :class=\"{'focus':4==page}\">4</button>\r\n              <button @click=\"SwitchPage(5)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\" :class=\"{'focus':5==page}\">5</button>\r\n              <button @click=\"SwitchPage(6)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\" :class=\"{'focus':6==page}\">6</button>\r\n              <button @click=\"SwitchPage(7)\" style=\"cursor:pointer;width:30px;height:30px;margin-left:20px;\" :class=\"{'focus':7==page}\">7</button>\r\n            </div>\r\n          </div>\r\n          <button @click=\"NextPage\" style=\"cursor:pointer;width:60px;\">下一页</button>\r\n        </div>\r\n      </div>\r\n      <div v-else style=\"display:flex;flex-direction:column;width:500px;margin-left:200px;margin-top:50px;background-color:white;height:656px;display:flex;flex-direction:column;\">\r\n        <p style=\"margin-left:1rem;margin-top:1rem;\">未查询到相关博客</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getCurrentInstance,onMounted,nextTick} from \"vue\";\r\nimport axios from \"axios\";\r\nimport router from \"../Router/First\";\r\nexport default {\r\nsetup(){\r\n  const gci=getCurrentInstance()\r\n  onMounted(()=>{\r\n    document.title='搜索结果'\r\n    gci.data.search=router.currentRoute.value.query.search\r\n    axios.get('http://114.55.38.94/api/SearchBlogs',{params: {\"search\":router.currentRoute.value.query.search}}).then((res)=>{\r\n      console.log(res.data.data)\r\n      if(res.data.data[0]==null){\r\n        gci.data.hasResult=false\r\n      }else{\r\n        gci.data.blogs=res.data.data\r\n        gci.data.eightBlogCount = Math.ceil(gci.data.blogs.length /8)\r\n      }\r\n    })\r\n  })\r\n},\r\ndata(){\r\n  return{\r\n    blogs:[],\r\n    eightBlogCount:0,\r\n    search:null,\r\n    page:1,\r\n    hasResult:true,\r\n  }\r\n},\r\nmethods:{\r\n  ToBlog(blogId){\r\n    router.push({path:'/Blog',query:{'blogId':blogId}})\r\n  },\r\n  PreviousPage(){\r\n    if(this.page==1){\r\n      alert(\"已经是第一页了\")\r\n    }else{\r\n      this.page--\r\n      router.push({path:'/Index',query:{'page':this.page}})\r\n      router.currentRoute.value.query.page=this.page\r\n    }\r\n  },\r\n  NextPage(){\r\n    if(this.page==this.eightBlogCount){\r\n      alert(\"已经是最后一页了\")\r\n    }else{\r\n      this.page++\r\n      router.push({path:'/Index',query:{'page':this.page}})\r\n      router.currentRoute.value.query.page=this.page\r\n    }\r\n  },\r\n  SwitchPage(page){\r\n    router.push({path:'/Index',query:{'page':page}})\r\n    router.currentRoute.value.query.page=page\r\n    nextTick((()=>{\r\n      this.mitt1.emit('Reload')\r\n    }))\r\n  },\r\n  SearchBlogs(search){\r\n    router.push({path:'/Search',query:{'search':search}})\r\n  },\r\n}\r\n}\r\n</script>\r\n\r\n<style scoped></style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}