{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ImageManager } from \"@/Class/ImageManager\";\nconst DEFAULT_URL = \"http://114.55.38.94:8001/picture/defaultImage.png\";\nexport default class Lazy {\n  constructor() {\n    this.managerQueue = [];\n    this.initIntersectionObserver();\n    this.loading = DEFAULT_URL;\n    this.error = DEFAULT_URL;\n  }\n  add(el, binding) {\n    const src = binding.value;\n    const imageManager = new ImageManager({\n      el,\n      src,\n      loading: this.loading,\n      error: this.error\n    });\n    this.managerQueue.push(imageManager);\n    this.observer.observe(el);\n  }\n  initIntersectionObserver() {\n    this.observer = new IntersectionObserver(entries => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          const manager = this.managerQueue.find(manager => {\n            return manager.el === entry.target;\n          });\n          console.log(manager);\n          if (manager) {\n            if (manager.state === 1) {\n              this.removeManager(manager);\n              return;\n            }\n            manager.load();\n          }\n        }\n      });\n    });\n  }\n  removeManager(manager) {\n    const index = this.managerQueue.indexOf(manager);\n    if (index > -1) {\n      this.managerQueue.splice(index, 1);\n    }\n    if (this.observer) {\n      this.observer.unobserve(manager.el);\n    }\n  }\n}","map":{"version":3,"names":["ImageManager","DEFAULT_URL","Lazy","constructor","managerQueue","initIntersectionObserver","loading","error","add","el","binding","src","value","imageManager","push","observer","observe","IntersectionObserver","entries","forEach","entry","isIntersecting","manager","find","target","console","log","state","removeManager","load","index","indexOf","splice","unobserve"],"sources":["D:/lin_hai_bo_ke/qian_duan_2/src/Class/Lazy.js"],"sourcesContent":["import {ImageManager} from \"@/Class/ImageManager\";\r\n\r\nconst DEFAULT_URL = \"http://114.55.38.94:8001/picture/defaultImage.png\"\r\nexport default class Lazy {\r\n    constructor() {\r\n        this.managerQueue = []\r\n        this.initIntersectionObserver()\r\n        this.loading =DEFAULT_URL\r\n        this.error = DEFAULT_URL\r\n    }\r\n    add(el,binding) {\r\n        const src = binding.value\r\n        const imageManager = new ImageManager({el, src, loading: this.loading, error: this.error})\r\n        this.managerQueue.push(imageManager)\r\n        this.observer.observe(el)\r\n    }\r\n    initIntersectionObserver() {\r\n        this.observer = new IntersectionObserver((entries) => {\r\n            entries.forEach((entry) => {\r\n                if (entry.isIntersecting) {\r\n                    const manager = this.managerQueue.find((manager)=>{return manager.el === entry.target})\r\n                    console.log(manager)\r\n                    if (manager) {\r\n                        if (manager.state === 1) {\r\n                            this.removeManager(manager)\r\n                            return\r\n                        }\r\n                        manager.load()\r\n                    }\r\n                }\r\n            })\r\n        })\r\n    }\r\n    removeManager(manager) {\r\n        const index = this.managerQueue.indexOf(manager)\r\n        if (index > -1) {\r\n            this.managerQueue.splice(index, 1)\r\n        }\r\n        if (this.observer) {\r\n            this.observer.unobserve(manager.el)\r\n        }\r\n    }\r\n}\r\n\r\n"],"mappings":";AAAA,SAAQA,YAAY,QAAO,sBAAsB;AAEjD,MAAMC,WAAW,GAAG,mDAAmD;AACvE,eAAe,MAAMC,IAAI,CAAC;EACtBC,WAAWA,CAAA,EAAG;IACV,IAAI,CAACC,YAAY,GAAG,EAAE;IACtB,IAAI,CAACC,wBAAwB,CAAC,CAAC;IAC/B,IAAI,CAACC,OAAO,GAAEL,WAAW;IACzB,IAAI,CAACM,KAAK,GAAGN,WAAW;EAC5B;EACAO,GAAGA,CAACC,EAAE,EAACC,OAAO,EAAE;IACZ,MAAMC,GAAG,GAAGD,OAAO,CAACE,KAAK;IACzB,MAAMC,YAAY,GAAG,IAAIb,YAAY,CAAC;MAACS,EAAE;MAAEE,GAAG;MAAEL,OAAO,EAAE,IAAI,CAACA,OAAO;MAAEC,KAAK,EAAE,IAAI,CAACA;IAAK,CAAC,CAAC;IAC1F,IAAI,CAACH,YAAY,CAACU,IAAI,CAACD,YAAY,CAAC;IACpC,IAAI,CAACE,QAAQ,CAACC,OAAO,CAACP,EAAE,CAAC;EAC7B;EACAJ,wBAAwBA,CAAA,EAAG;IACvB,IAAI,CAACU,QAAQ,GAAG,IAAIE,oBAAoB,CAAEC,OAAO,IAAK;MAClDA,OAAO,CAACC,OAAO,CAAEC,KAAK,IAAK;QACvB,IAAIA,KAAK,CAACC,cAAc,EAAE;UACtB,MAAMC,OAAO,GAAG,IAAI,CAAClB,YAAY,CAACmB,IAAI,CAAED,OAAO,IAAG;YAAC,OAAOA,OAAO,CAACb,EAAE,KAAKW,KAAK,CAACI,MAAM;UAAA,CAAC,CAAC;UACvFC,OAAO,CAACC,GAAG,CAACJ,OAAO,CAAC;UACpB,IAAIA,OAAO,EAAE;YACT,IAAIA,OAAO,CAACK,KAAK,KAAK,CAAC,EAAE;cACrB,IAAI,CAACC,aAAa,CAACN,OAAO,CAAC;cAC3B;YACJ;YACAA,OAAO,CAACO,IAAI,CAAC,CAAC;UAClB;QACJ;MACJ,CAAC,CAAC;IACN,CAAC,CAAC;EACN;EACAD,aAAaA,CAACN,OAAO,EAAE;IACnB,MAAMQ,KAAK,GAAG,IAAI,CAAC1B,YAAY,CAAC2B,OAAO,CAACT,OAAO,CAAC;IAChD,IAAIQ,KAAK,GAAG,CAAC,CAAC,EAAE;MACZ,IAAI,CAAC1B,YAAY,CAAC4B,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;IACtC;IACA,IAAI,IAAI,CAACf,QAAQ,EAAE;MACf,IAAI,CAACA,QAAQ,CAACkB,SAAS,CAACX,OAAO,CAACb,EAAE,CAAC;IACvC;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}