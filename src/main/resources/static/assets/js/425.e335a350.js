"use strict";(self["webpackChunkqian_duan_2"]=self["webpackChunkqian_duan_2"]||[]).push([[425],{425:function(t,e,a){a.r(e),a.d(e,{default:function(){return Q}});var i=a(3396),l=a(7139),o=a(9242);const d={key:0,style:{display:"flex","flex-direction":"column","align-items":"center"}},n={style:{display:"flex","flex-direction":"column",border:"2px solid grey",width:"1200px","margin-top":"20px","background-color":"white"}},r={style:{display:"flex","flex-direction":"row",height:"40px","border-bottom":"solid 1px black"}},p={style:{width:"950px","font-size":"30px"}},s=["src"],c={style:{display:"flex","flex-direction":"column"}},h={style:{display:"flex"}},g={style:{width:"120px"}},m={style:{"margin-left":"50px"}},x=["innerHTML"],u={style:{display:"flex","flex-direction":"row",border:"2px solid grey",width:"800px","min-height":"100px","align-self":"center","background-color":"white"}},y=["src"],b={style:{display:"flex","flex-direction":"column","margin-top":"10px"}},w={style:{display:"flex"}},k=["src"],f={style:{display:"flex","flex-direction":"column"}},I={style:{color:"grey","margin-top":"2px","margin-left":"30px",width:"100px"}},v={style:{"margin-top":"5px","margin-left":"10px","min-height":"30px"}},C={style:{display:"flex","flex-direction":"row","margin-top":"9px","align-items":"end"}},D=["onClick"],_=["onClick"],L={style:{width:"20px",height:"25px"}},R=["onClick"],z={style:{width:"60px","margin-left":"10px",height:"25px"}},Z=["onClick"],B={style:{"margin-left":"320px"}},A={key:0},G=["src"],H={style:{"margin-left":"10px",color:"grey",width:"50px"}},S={style:{"margin-left":"10px","min-width":"500px"}},q=["onClick"],N={style:{"align-self":"center",width:"10px"}},T={style:{"margin-left":"10px","align-self":"end"}},P={key:1,style:{display:"flex","flex-direction":"row","border-top":"solid 1px black",height:"70px"}},$=["src"],Y=["placeholder"],F={style:{width:"20px","font-size":"5px"}},K=["onClick"];function M(t,e,a,M,O,U){return O.isRouterAlive?((0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("div",n,[(0,i._)("div",r,[(0,i._)("p",p,(0,l.zw)(O.blogData.title),1),(0,i._)("img",{onClick:e[0]||(e[0]=t=>U.GoAuthor(O.blogData.authorId)),src:"http://114.55.38.94:8001/avatar/"+O.authorAvatar,style:{width:"40px",height:"40px","border-radius":"50%",cursor:"pointer"}},null,8,s),(0,i._)("div",c,[(0,i._)("div",h,[(0,i._)("p",g,"作者:"+(0,l.zw)(O.authorName),1),0==O.like?((0,i.wg)(),(0,i.iD)("img",{key:0,onClick:e[1]||(e[1]=(...t)=>U.LikeBlog&&U.LikeBlog(...t)),src:"http://114.55.38.94:8001/picture/Like.png",style:{width:"20px",height:"20px",cursor:"pointer"}})):((0,i.wg)(),(0,i.iD)("img",{key:1,onClick:e[2]||(e[2]=(...t)=>U.LikeBlog&&U.LikeBlog(...t)),src:"http://114.55.38.94:8001/picture/Liked.png",style:{width:"20px",height:"20px",cursor:"pointer"}})),(0,i._)("p",null,(0,l.zw)(O.blogData.liked),1),1==O.collection?((0,i.wg)(),(0,i.iD)("img",{key:2,onClick:e[3]||(e[3]=t=>U.CollectBlog(O.blogData.blogId)),src:"http://114.55.38.94:8001/picture/collected.png",style:{width:"20px",height:"20px",cursor:"pointer","margin-left":"30px"}})):((0,i.wg)(),(0,i.iD)("img",{key:3,onClick:e[4]||(e[4]=t=>U.CollectBlog(O.blogData.blogId)),src:"http://114.55.38.94:8001/picture/collect.png",style:{width:"20px",height:"20px",cursor:"pointer","margin-left":"30px"}}))]),(0,i._)("p",m,(0,l.zw)(O.blogData.birthTime),1)])]),(0,i._)("div",{style:{"margin-left":"20px"},innerHTML:O.blogData.content},null,8,x)]),(0,i._)("div",u,[(0,i._)("img",{src:"http://114.55.38.94:8001/avatar/"+O.avatar,style:{width:"60px",height:"60px",margin:"10px","border-radius":"50%"}},null,8,y),(0,i._)("div",b,[(0,i.wy)((0,i._)("textarea",{ref:"content",onInput:e[5]||(e[5]=(...t)=>U.DescComment&&U.DescComment(...t)),style:{resize:"none","font-size":"15px",border:"solid 1px black",width:"400px",height:"70px"},maxlength:"100","onUpdate:modelValue":e[6]||(e[6]=t=>O.comment=t)},null,544),[[o.nr,O.comment]]),(0,i._)("p",null,"还可输"+(0,l.zw)(O.couldComment)+"字",1)]),(0,i._)("input",{type:"button",value:"评论",style:{"background-color":"deepskyblue",width:"60px",height:"40px","border-radius":"5px",color:"white","margin-left":"20px","margin-top":"20px",cursor:"pointer"},onClick:e[7]||(e[7]=(...t)=>U.Comment&&U.Comment(...t))})]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(O.commentData,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.cmtId,style:{"background-color":"white",display:"flex","flex-direction":"column","flex-wrap":"nowrap",border:"2px solid black",width:"800px","align-self":"center"}},[(0,i._)("div",w,[(0,i._)("img",{style:{width:"60px",height:"60px","border-radius":"50%","margin-left":"10px","margin-top":"10px"},src:"http://114.55.38.94:8001/avatar/"+t.avatar},null,8,k),(0,i._)("div",f,[(0,i._)("p",I,(0,l.zw)(t.name),1),(0,i._)("p",v,(0,l.zw)(t.content),1),(0,i._)("div",C,[0==t.relationship?((0,i.wg)(),(0,i.iD)("img",{key:0,src:"http://114.55.38.94:8001/picture/Like.png",onClick:e=>U.Like1(t.cmtId),style:{width:"30px",height:"30px",cursor:"pointer"}},null,8,D)):((0,i.wg)(),(0,i.iD)("img",{key:1,src:"http://114.55.38.94:8001/picture/Liked.png",onClick:e=>U.Like1(t.cmtId),style:{width:"30px",height:"30px",cursor:"pointer"}},null,8,_)),(0,i._)("p",L,(0,l.zw)(t.liked),1),(0,i._)("button",{onClick:e=>U.AddReply(O.commentData.indexOf(t)),style:{height:"30px",width:"40px","margin-left":"20px",cursor:"pointer","background-color":"deepskyblue","border-radius":"3px"}},"回复",8,R),(0,i._)("p",z,"回复:"+(0,l.zw)(t.kids),1),(0,i._)("button",{onClick:e=>U.ShowReply(t.cmtId),style:{height:"30px",width:"80px",cursor:"pointer","background-color":"deepskyblue","border-radius":"3px"}},"查看回复",8,Z),(0,i._)("p",B,(0,l.zw)(t.birthTime),1)])])]),1==O.isShow[t.cmtId]?((0,i.wg)(),(0,i.iD)("div",A,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(O.replyData[t.cmtId],(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.cmtId,style:{display:"flex","flex-direction":"row","border-top":"solid 1px black"}},[(0,i._)("img",{style:{width:"30px",height:"30px"},src:"http://114.55.38.94:8001/avatar/"+t.avatar},null,8,G),(0,i._)("p",H,(0,l.zw)(t.name),1),(0,i._)("p",S,(0,l.zw)(t.content),1),(0,i._)("img",{src:"http://114.55.38.94:8001/picture/Like.png",onClick:e=>U.Like2(t.cmtId,t.parentId),style:{width:"30px",height:"30px",cursor:"pointer"}},null,8,q),(0,i._)("p",N,(0,l.zw)(t.liked),1),(0,i._)("p",T,(0,l.zw)(t.birthTime),1)])))),128))])):(0,i.kq)("",!0),O.canReply==O.commentData.indexOf(t)?((0,i.wg)(),(0,i.iD)("div",P,[(0,i._)("img",{src:"http://114.55.38.94:8001/avatar/"+O.avatar,style:{width:"60px",height:"60px","border-radius":"50%",margin:"5px"}},null,8,$),(0,i.wy)((0,i._)("textarea",{onInput:e[8]||(e[8]=t=>U.DescReply()),style:{resize:"none",border:"solid 1px black",width:"300px",height:"60px","margin-top":"5px"},"onUpdate:modelValue":e[9]||(e[9]=t=>O.reply=t),maxlength:"100",placeholder:"回复 @"+t.name+":"},null,40,Y),[[o.nr,O.reply]]),(0,i._)("p",F,"可输"+(0,l.zw)(this.couldReply)+"字",1),(0,i._)("button",{onClick:e=>U.Reply(t.cmtId),style:{height:"30px",width:"40px",margin:"20px",cursor:"pointer","background-color":"deepskyblue","border-radius":"5px",color:"white"}},"回复",8,K)])):(0,i.kq)("",!0)])))),128))])):(0,i.kq)("",!0)}a(7658);var O=a(4161),U=a(4870),V=a(8229),j={setup(){const t=(0,i.FN)(),e=(0,U.iH)(null);return(0,i.bv)((async()=>{e.value.placeholder="请输入您的评论",t.data.blogId=V.Z.currentRoute.value.query.blogId,t.data.id=t.appContext.config.globalProperties.$id,null!=t.appContext.config.globalProperties.$avatar&&(t.data.avatar=t.appContext.config.globalProperties.$avatar),t.data.mitt1=t.appContext.config.globalProperties.$mitt1,document.title="博客"+t.data.blogId,await O.Z.get("http://114.55.38.94:8001/GetBlog",{params:{blogId:t.data.blogId}}).then((e=>{t.data.blogData=e.data.data})),O.Z.get("http://114.55.38.94:8001/GetNameById",{params:{id:t.data.blogData.authorId}}).then((e=>{t.data.authorName=e.data.data})),O.Z.get("http://114.55.38.94:8001/GetAvatarById",{params:{id:t.data.blogData.authorId}}).then((e=>{t.data.authorAvatar=e.data.data})),O.Z.get("http://114.55.38.94:8001/HasBlogLike",{params:{id:t.data.id,blogId:t.data.blogId}}).then((e=>{t.data.like=e.data.data})),O.Z.get("http://114.55.38.94:8001/HasCollection",{params:{id:t.data.id,blogId:t.data.blogData.blogId}}).then((e=>{1==e.data.data&&(t.data.collection=1)})),O.Z.get("http://114.55.38.94:8001/GetComment",{params:{id:t.data.id,parentId:0,blogId:t.data.blogId}}).then((e=>{t.data.commentData=e.data.data}));for(let e=0;e<t.data.commentData.length;e++)void 0!=t.data.commentData[e].parentId&&this.ShowReply(t.data.commentData[e].parentId)})),{content:e}},data(){return{blogData:{avatar:"default.png"},comment:"",commentData:[],replyData:[[{}]],canReply:-1,reply:null,noClick:!0,blogId:0,couldComment:100,couldReply:100,isShow:[],avatar:"default.png",isRouterAlive:!0,id:0,authorName:"作者名称",authorAvatar:"default.png",collection:0,like:null}},methods:{Comment(){const t=this;O.Z.get("http://114.55.38.94:8001/Comment",{params:{id:this.id,content:this.comment,parentId:0,blogId:this.blogId}}).then((function(e){"评论成功"==e.data.data?(alert(e.data.data),t.isRouterAlive=!1,O.Z.get("http://114.55.38.94:8001/GetComment",{params:{parentId:0,blogId:t.blogId}}).then((function(e){t.commentData=e.data.data})),(0,i.Y3)((()=>{t.isRouterAlive=!0}))):alert("评论失败")}))},Like1(t){let e=this;O.Z.get("http://114.55.38.94:8001/LikeComment",{params:{id:this.id,cmtId:t,parentId:0,blogId:this.blogId}}).then((function(a){for(let i=0;i<e.commentData.length;i++)e.commentData[i].cmtId==t&&(e.commentData[i]=a.data.data)}))},Like2(t,e){let a=this;O.Z.get("http://114.55.38.94:8001/LikeComment",{params:{id:this.id,cmtId:t,parentId:e,blogId:this.blogId}}).then((function(t){a.replyData[e]=t.data.data}))},LikeBlog(){const t=this;O.Z.get("http://114.55.38.94:8001/LikeBlog",{params:{id:this.id,blogId:this.blogId}}).then((function(e){t.blogData=e.data.data,t.like=1-t.like}))},AddReply(t){this.canReply=t},Reply(t){const e=this;O.Z.get("/http://114.55.38.94:8001/Comment",{params:{id:this.id,content:this.reply,parentId:t,blogId:this.blogId}}).then((function(t){"评论成功"==t.data.data&&(alert("回复成功"),e.mitt1.emit("Reload"))}))},ShowReply(t){let e=this;O.Z.get("/http://114.55.38.94:8001/GetComment",{params:{parentId:t,blogId:this.blogId}}).then((function(a){e.replyData[t]=a.data.data})),1!=this.isShow[t]?this.isShow[t]=1:this.isShow[t]=0},DescComment(){void 0!=this.comment&&(this.couldComment=100-this.comment.length)},DescReply(){void 0!=this.reply&&(this.couldReply=100-this.reply.length)},GoAuthor(t){V.Z.push({path:"/Follow",query:{authorId:t}})},CollectBlog(){const t=this;O.Z.get("http://114.55.38.94:8001/InsertCollection",{params:{id:this.id,blogId:this.blogId}}).then((()=>{O.Z.get("http://114.55.38.94:8001/HasCollection",{params:{id:t.id,blogId:t.blogId}}).then((e=>{t.collection=e.data.data}))}))}}},E=a(89);const J=(0,E.Z)(j,[["render",M],["__scopeId","data-v-2aaad38a"]]);var Q=J}}]);
//# sourceMappingURL=425.e335a350.js.map